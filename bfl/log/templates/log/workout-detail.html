{% extends "users/base.html" %}
{% block content %}
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-10">
      <h1 class="page-title">
        <a class="btn btn-secondary" style="margin-right: 1em;" href="{{ referer }}">
          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
          </svg>
        </a>
        {{ workout.name }}
        <small class="text-muted">{{ workout.date | date:"F d, Y" }}</small>
      </h1>
    </div>
    <div class="col-sm-2 text-center">
      {% if workout.user == user %}
      <div class="btn-group">
        <a class="btn btn-secondary" href="{{ update }}" role="button">Edit</a>
        <a class="btn btn-danger" href="{{ delete }}" role="button">Delete</a>
      </div>
      {% elif user.is_superuser and workout.user is not user %}
      <!-- Will replace once workouts are implemented -->
      <h2 style="color: white;">
        <a class="workout-detail-user-link" href="{% url 'profile' workout.user.username %}">
          @{{ workout.user }}
        </a>
      </h2>
      {% endif %}
    </div>
  </div>
  <div class="row" style="padding-top: 1em;">
    <div class="col-md-4" style="padding-bottom: 1em;">
      <div class="card text-center">
        <div class="card-header">
          {{ num1_title }}
        </div>
        <div class="card-body">
          <h4 class="card-title">{{ num1_value }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-4" style="padding-bottom: 1em;">
      <div class="card text-center">
        <div class="card-header">
          {{ num2_title }}
        </div>
        <div class="card-body">
          <h4 class="card-title">{{ num2_value }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-4" style="padding-bottom: 1em;">
      <div class="card text-center">
        <div class="card-header">
          {{ num3_title }}
        </div>
        <div class="card-body">
          <h4 class="card-title">{{ num3_value }} {{ num3_units }}</h4>
        </div>
      </div>
    </div>
  </div>
  <div class="row" style="padding-top: 2em;">
    <div class="col-md-12">
      <div class="card text-center">
        <div class="card-header">
          <strong>
            Recent {{ workout.name }} Workouts
          </strong>
        </div>
        <div class="card-body">
          {% if related.count == 0 %}
          <h4>No Recent Workouts to Display</h4>
          {% else %}
          <div class="table-responsive-lg">
            <table class="table table-light table-striped table-bordered">
              <thead class="thead-light">
              <tr>
                <th scope="col">Name</th>
                <th scope="col">{{ num1_title }}</th>
                <th scope="col">{{ num2_title }}</th>
                <th scope="col">{{ num3_title }}</th>
                <th scope="col">Date</th>
              </tr>
              </thead>
              <tbody>
              {% for object in related %}
              <tr>
                {% if category == 'CARDIO' %}
                <th scope="row">
                  <a class="workout-title-link" href="{% url 'c-workout-detail' object.id %}">
                    {{ object.name }}
                  </a>
                </th>
                <td>{{ object.sets }}</td>
                <td>{{ object.time | time:"H:i:s" }}</td>
                <td>
                  {% if object.distance == 0 %}
                  N/A
                  {% else %}
                  {% if object.user.profile.distance_units == 'M' %}
                  {{ object.distance }} mi
                  {% else %}
                  {{ object.distance }} km
                  {% endif %}
                  {% endif %}
                </td>
                {% elif category == 'RESISTANCE' %}
                <th scope="row">
                  <a class="workout-title-link" href="{% url 'r-workout-detail' object.id %}">
                    {{ object.name }}
                  </a>
                </th>
                <td>{{ object.sets }}</td>
                <td>{{ object.reps }}</td>
                <td>
                  {% if object.resistance == 'E' %}
                  Easy
                  {% elif object.resistance == 'M' %}
                  Medium
                  {% elif object.resistance == 'D' %}
                  Difficult
                  {% else %}
                  Advanced
                  {% endif %}
                </td>
                {% else %}
                <th scope="row">
                  <a class="workout-title-link" href="{% url 'wl-workout-detail' object.id %}">
                    {{ object.name }}
                  </a>
                </th>
                <td>{{ object.sets }}</td>
                <td>{{ object.reps }}</td>
                <td>
                  {% if object.user.profile.weight_units == 'P' %}
                  {{ object.weight }} lbs
                  {% else %}
                  {{ object.weight }} kg
                  {% endif %}
                </td>
                {% endif %}
                <td>{{ object.date | date:"m/d/Y" }}</td>
              </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}